angular.module("MtClab",["ngRoute","Directives","TokenModule","ResourceModule","LanguageModule","NavigationModule","IndexModule","AppsModule","OptionsModule","UserModule","LoginModule"]).config(function(e,n,t,a){$routeProviderReference=e,n.html5Mode(!1).hashPrefix("!"),t.setCredentials(a.getCredentials())}).filter("searchFor",function(){return function(e,n){if(!n)return e;var t=[];return n=n.toLowerCase(),angular.forEach(e,function(e){-1!==e.name.toLowerCase().indexOf(n)&&t.push(e)}),t}}).filter("filterField",function(){return console.log("check"),function(e,n){if(!item)return e;var t=[];return angular.forEach(e,function(e){0===e[n]&&t.push(e)}),t}}).factory("LanguageFactory",["Resource",function(e){return e("lang")}]).factory("Logout",["Resource",function(e){return e("logout")}]).factory("Menu",["Resource",function(e){return e("menu")}]).run(["$rootScope","$location","$route","$translate","Menu","Language","LanguageFactory","Credentials","Navigation","Logout",function(e,n,t,a,o,r,i,g,u,l){var s;if(e.afterLanguage=function(){a.uses(r.getLanguage()),e.$on("$routeChangeStart",function(n,t,a){t.params.lang!==r.getLanguage()?(i.setId(t.params.lang),i.get().then(function(o){var i=o.data;r.setLanguage(i.lang),$translateProviderReference.translations(i.lang,i),r.isSessionStorage()&&sessionStorage.setItem("langs",JSON.stringify(i)),e.rootScopeOn(n,t,a)})):e.rootScopeOn(n,t,a)})},e.rootScopeOn=function(e,n){a.uses(r.getLanguage()),"undefined"!=typeof n.params.option&&(n.params.option=u.getItem(n.params.option),"undefined"!=typeof n.params.action&&(n.params.action=u.getItem(n.params.action)))},$routeProviderReference.when("/:lang",{templateUrl:"common/index/index.tpl.html",controller:"IndexCtrl"}).when("/:lang/:option",{templateUrl:function(e){return r.getLanguage()&&r.getLanguage()===e.lang?(e.url="common/"+e.option+"/"+e.option+".tpl.html",s=php.ucfirst(e.option)+"Ctrl"):n.path(e.lang),e.url},controller:s}).when("/:lang/:option/:action",{templateUrl:function(e){return r.getLanguage()&&r.getLanguage()===e.lang?(e.url="common/"+e.option+"/"+e.option+"."+e.action+".tpl.html",s=php.ucfirst(e.action)+"Ctrl"):n.path(e.lang),e.url},controller:s}).when("/:lang/:option/:action/:id",{templateUrl:function(e){return r.getLanguage()&&r.getLanguage()===e.lang?(e.url="common/"+e.option+"/"+e.option+"."+e.action+".tpl.html",s=php.ucfirst(e.action)+"Ctrl"):n.path(e.lang),e.url},controller:s}).otherwise({redirectTo:"/nl/"}),e.Navigation=function(){u.setLanguage(r.getLanguage()),u.isMenuLoaded()?(console.log("menu loaded"),e.afterLanguage()):o.query().then(function(n){u.setMenu(n.data),e.afterLanguage()})},r.isSessionStorage())if(r.isLanguageInSession()){var c=JSON.parse(sessionStorage.getItem("langs"));$translateProviderReference.translations(c.lang,c),r.setLanguage(c.lang),console.log("language loaded from session"),e.Navigation()}else i.setId(r.getLanguage()),i.get().then(function(n){var t=n.data;sessionStorage.setItem("langs",JSON.stringify(t)),$translateProviderReference.translations(t.lang,t),console.log("language loaded from rest (to session)"),e.Navigation()});else i.setId(r.getLanguage()),i.get().then(function(e){var n=e.data;$translateProviderReference.translations(n.lang,n),console.log("language loaded from rest (no session)"),NavigationProvider()});e.isAuthenticated=function(){return g.isAuthenticated()},e.logout=function(){l.post().then(function(){g.setUser(!1,!1),n.path("")})}}]),angular.module("Directives",[]).directive("required",function(){return{restrict:"A",link:function(e,n){var t='<div class="required">*</div>';n.parent().append(t)}}});