angular.module("MtClab",["ngRoute","IndexModule","AppsModule","OptionsModule","UserModule","LoginModule","pascalprecht.translate"]).config(function(n,e,t){$routeProviderReference=n,$translateProviderReference=t,e.html5Mode(!1),e.hashPrefix("!")}).provider("language",function(){var n="nl";return{$get:function(){return{setLanguage:function(e){n=e},getLanguage:function(){return n}}}}}).factory("Resource",["$http","Token","XSRF",function(n,e,t){return function(r){var o,u="/public/api/"+r,a=function(n){angular.extend(this,n)};return a.setId=function(n){o=n},a.query=function(){return n.get(u,{headers:{token:e.get()}}).then(function(n){return e.set(n.headers("token")),n.headers("X-XSRF-TOKEN")&&t.set(n.headers("X-XSRF-TOKEN")),n})},a.post=function(r){return n.post(u,JSON.stringify(r),{headers:{token:e.get(),"X-XSRF-TOKEN":t.get()}}).then(function(n){return e.set(n.headers("token")),resp=n.data,resp.error=!1,resp},function(){return{error:"error.bad-request"}})},a.put=function(r){return url=u+"/"+o,n.put(url,JSON.stringify(r),{headers:{token:e.get(),"X-XSRF-TOKEN":t.get()}}).then(function(n){return e.set(n.headers("token")),n})},a}}]).factory("tokenHandler",function(){var n,e={};return e.set=function(e){n=e},e.get=function(){return n},e}).factory("Token",function(){var n,e={};return e.set=function(e){n=e},e.get=function(){return n},e}).factory("XSRF",function(){var n={},e="";return n.set=function(n){e=n},n.get=function(){return e},n}).factory("menuFactory",function(){var n={},e={};return n.set=function(n){e=n},n.get=function(){return e},n}).filter("searchFor",function(){return function(n,e){if(!e)return n;var t=[];return e=e.toLowerCase(),console.log(e),angular.forEach(n,function(n){-1!==n.name.toLowerCase().indexOf(e)&&t.push(n)}),t}}).controller("LangCtrl",["$scope","$location",function(n,e){n.go=function(n){e.path(n)}}]).run(["$rootScope","$location","tokenHandler","menuFactory","language",function(n,e,t,r,o){var u;n.$on("$routeChangeStart",function(n,t){var o=r.get();"undefined"!=typeof o.init?("undefined"!=typeof t.params.option&&(t.params.option=o[t.params.option]),"undefined"!=typeof t.params.action&&(t.params.action=o[t.params.action])):e.path("en")}),$routeProviderReference.when("/:lang",{templateUrl:"common/index/index.tpl.html",controller:"IndexCtrl"}).when("/:lang/:option",{templateUrl:function(n){if(o.getLanguage()&&o.getLanguage()===n.lang){{r.get()}n.url="common/"+n.option+"/"+n.option+".tpl.html",u=php.ucfirst(n.option)+"Ctrl"}else e.path(n.lang);return n.url},controller:u,resolve:{}}).when("/:lang/:option/:action",{templateUrl:function(n){if(o.getLanguage()&&o.getLanguage()===n.lang){{r.get()}n.url="common/"+n.option+"/"+n.option+"."+n.action+".tpl.html",u=php.ucfirst(n.action)+"Ctrl"}else e.path(n.lang);return n.url},controller:u}).otherwise({redirectTo:"/nl/"})}]);