angular.module("ResourceModule",[]).provider("Headers",function(){var e={};return{setCredentials:function(t){e=t},$get:function(){return{getHeaders:function(){var t={token:e.token};return"null"!==e.xsrf&&(t.xsrf=e.xsrf),t},setHeaders:function(t){e.token=t.token,e.xsrf=t.xsrf||!1,e.save()}}}}}).factory("Resource",["$http","Token","XSRF","Headers",function(e,t,r,n){return function(s){var o,u="/public/api/"+s,a=function(e){angular.extend(this,e)};return a.getHeaders=function(){return n.getHeaders()},a.setHeaders=function(e){n.setHeaders(e)},a.setId=function(e){o=e},a.query=function(){return e.get(u,{headers:this.getHeaders()}).then(function(e){return t.set(e.headers("token")),console.log(e),e})},a.get=function(n){return url=u+"/"+o,e.get(url,JSON.stringify(n),{headers:{token:t.get()}}).then(function(e){return e.headers("request")&&"credentials"===e.headers("request")&&console.log("credentials asked"),t.set(e.headers("token")),e.headers("X-XSRF-TOKEN")&&r.set(e.headers("X-XSRF-TOKEN")),e})},a.post=function(n){return e.post(u,JSON.stringify(n),{headers:{token:t.get(),"X-XSRF-TOKEN":r.get()}}).then(function(e){return t.set(e.headers("token")),e.headers("X-XSRF-TOKEN")&&r.set(e.headers("X-XSRF-TOKEN")),resp=e,resp.error=!1,resp},function(){return{error:"error.bad-request"}})},a.put=function(n){return url=u+"/"+o,e.put(url,JSON.stringify(n),{headers:{token:t.get(),"X-XSRF-TOKEN":r.get()}}).then(function(e){return t.set(e.headers("token")),e})},a}}]).factory("Token",function(){var e,t={};return t.set=function(t){e=t,window.sessionStorage&&sessionStorage.setItem("token",t)},t.get=function(){return e},t}).factory("XSRF",function(){var e,t={};return t.set=function(t){e=t,window.sessionStorage&&sessionStorage.setItem("xsrf",t)},t.get=function(){return"false"===e&&(e=!1),e},t});