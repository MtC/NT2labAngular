angular.module("ResourceModule",[]).provider("Headers",function(){var e={};return{setCredentials:function(r){e=r},$get:function(){return{getHeaders:function(){var r={};return e.token&&(r["X-Token"]=e.token),e.xsrf&&(r["X-Xsrf-Token"]=e.xsrf),console.log("getHeaders: ",r),r},setHeaders:function(r){e.token=r("X-Token")||!1,e.xsrf=r("X-Xsrf-Token")||!1,r("X-User")&&(e.user=r("X-User")),r("X-Role")&&(e.role=r("X-Role")),console.log("setHeaders: ",e),e.save()}}}}}).factory("Resource",["$http","Headers",function(e,r){return function(n){var t="/public/api/"+n,s=!1,u=function(e){angular.extend(this,e)};return u.getHeaders=function(){return r.getHeaders()},u.setHeaders=function(e){r.setHeaders(e)},u.setId=function(e){s=e},u.query=function(){return e.get(t,{headers:u.getHeaders()}).then(function(e){return u.setHeaders(e.headers),e},function(){})},u.get=function(){return url=t+"/"+s,e.get(url,{headers:u.getHeaders()}).then(function(e){return u.setHeaders(e.headers),e},function(e){return e})},u.post=function(r){return e.post(t,JSON.stringify(r),{headers:u.getHeaders()}).then(function(e){return u.setHeaders(e.headers),e},function(){return{error:"error.bad-request"}})},u.put=function(r){return url=t+"/"+s,e.put(url,JSON.stringify(r),{headers:u.getHeaders()}).then(function(e){return u.setHeaders(e.headers),e},function(e){return e})},u}}]);