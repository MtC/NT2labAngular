angular.module("ResourceModule",[]).provider("Headers",function(){var e={};return{setCredentials:function(r){e=r},$get:function(){return{getHeaders:function(){var r={};return e.token&&(r.token=e.token),e.xsrf&&(r["X-XSRF-TOKEN"]=e.xsrf),r},setHeaders:function(r){e.token=r("token")||!1,e.xsrf=r("X-XSRF-TOKEN")||!1,e.save()}}}}}).factory("Resource",["$http","Headers",function(e,r){return function(t){var n,u="/public/api/"+t,s=function(e){angular.extend(this,e)};return s.getHeaders=function(){return r.getHeaders()},s.setHeaders=function(e){r.setHeaders(e)},s.setId=function(e){n=e},s.query=function(){return e.get(u,{headers:s.getHeaders()}).then(function(e){return s.setHeaders(e.headers),e},function(){})},s.get=function(r){return url=u+"/"+n,e.get(url,JSON.stringify(r),{headers:s.getHeaders()}).then(function(e){return s.setHeaders(e.headers),e},function(){})},s.post=function(r){return e.post(u,JSON.stringify(r),{headers:s.getHeaders()}).then(function(e){return s.setHeaders(e.headers),e},function(){return{error:"error.bad-request"}})},s.put=function(r){return url=u+"/"+n,e.put(url,JSON.stringify(r),{headers:s.getHeaders()}).then(function(e){return s.setHeaders(e.headers),e},function(){})},s}}]);