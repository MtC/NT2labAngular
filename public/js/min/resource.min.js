angular.module("ResourceModule",[]).factory("Resource",["$http","Token","XSRF",function(e,t,n){return function(r){var u,o="/public/api/"+r,s=function(e){angular.extend(this,e)};return s.setId=function(e){u=e},s.query=function(){return e.get(o,{headers:{token:t.get()}}).then(function(e){return t.set(e.headers("token")),console.log(e),e})},s.get=function(r){return url=o+"/"+u,e.get(url,JSON.stringify(r),{headers:{token:t.get()}}).then(function(e){return t.set(e.headers("token")),e.headers("X-XSRF-TOKEN")&&n.set(e.headers("X-XSRF-TOKEN")),e})},s.post=function(r){return e.post(o,JSON.stringify(r),{headers:{token:t.get(),"X-XSRF-TOKEN":n.get()}}).then(function(e){return t.set(e.headers("token")),resp=e,resp.error=!1,resp},function(){return{error:"error.bad-request"}})},s.put=function(r){return url=o+"/"+u,e.put(url,JSON.stringify(r),{headers:{token:t.get(),"X-XSRF-TOKEN":n.get()}}).then(function(e){return t.set(e.headers("token")),e})},s}}]).factory("Token",function(){var e,t={};return t.set=function(t){e=t},t.get=function(){return e},t}).factory("XSRF",function(){var e,t={};return t.set=function(t){e=t},t.get=function(){return e},t});