angular.module("OptionsModule",[]).factory("ToDo",["Resource",function(o){return o("todo")}]).controller("OptionsCtrl",["$scope","Credentials",function(o,t){o.isAuthenticated=function(){return t.isAuthenticated()}}]).controller("TodoCtrl",["$scope","ToDo","Navigation",function(o,t,e){o.todos=[],o.toggled=[],o.sortField="done_by",o.isToggledTodo=function(t){return o.toggled[t]},o.toggleTodo=function(t){o.toggled[t]=!o.toggled[t]},o.sortBy=function(t){o.sortField===t?o.sortFieldReverse=!o.sortFieldReverse:(o.sortField=t,o.sortFieldReverse=!1)},o.dater=function(){return"nl"===e.getLanguage()?"dd-MM-yyyy":"yyyy-MM-dd"},o.go=function(o){e.go(o)},t.query().then(function(t){o.todos=t.data}),o.changeTodo=function(o){console.log(o.id),e.go(e.getLanguage()+"/"+e.getMenuItem("menu.options.url")+"/"+e.getMenuItem("todo.form-change.url")+"/"+o.id)},o.todoOnOff=function(e,n){t.setId(e.id),"removed"===n?t.put({action:"removed"}).then(function(){o.todos.splice(o.todos.indexOf(e),1)}):"priority"===n?t.put({action:"priority"}).then(function(t){o.todos[o.todos.indexOf(e)].priority=t.data.priority}):"done"===n&&t.put({action:"done"}).then(function(t){o.todos[o.todos.indexOf(e)].done=t.data.done})}}]).controller("LanguageCtrl",["$scope","Navigation",function(o,t){o.go=function(o){t.setLanguage(o),console.log("/"+o+"/"+t.getMenuItem("menu.options.url")+"/"+t.getMenuItem("options.todo.url")),t.go("/"+o+"/"+t.getMenuItem("menu.options.url")+"/"+t.getMenuItem("options.language.url"))}}]).controller("formTodoCtrl",["$scope","$routeParams","ToDo","Navigation",function(o,t,e,n){o.toDo={priority:!1},console.log(t),t.id?(o.todoAddSubmit=!1,e.setId(t.id),e.get().then(function(t){if(200!==t.status)o.error=!0;else{o.error=!1;var e=t.data[0];o.toDo={id:e.id,todo:e.name,doneBy:e.done_by,description:e.description,priority:"0"===e.priority?!1:!0},o.td=angular.copy(o.toDo)}})):o.todoAddSubmit=!0,o.checkboxed=function(){o.toDo.priority=!o.toDo.priority},o.resetForm=function(){o.toDo={priority:!1},o.td?o.toDo={todo:o.td.todo,doneBy:o.td.doneBy,description:o.td.description,priority:o.td.priority}:o.formTodo.$setPristine()},o.addTodo=function(o){e.post(o).then(function(){n.go(n.getLanguage()+"/"+n.getMenuItem("menu.options.url")+"/"+n.getMenuItem("options.todo.url"))})},o.changeTodo=function(o){e.setId(o.id),e.put(o).then(function(o){console.log(o),n.go(n.getLanguage()+"/"+n.getMenuItem("menu.options.url")+"/"+n.getMenuItem("options.todo.url"))})},o.canSave=function(){return o.formTodo.$valid}}]);