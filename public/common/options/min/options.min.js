angular.module("OptionsModule",[]).factory("ToDo",["Resource",function(o){return o("todo")}]).controller("OptionsCtrl",["$scope","Credentials",function(o,t){o.isAuthenticated=function(){return t.isAuthenticated()}}]).controller("TodoCtrl",["$scope","$location","ToDo","Language",function(o,t,n,e){o.todos=[],o.toggled=[],o.sortField="name",o.reverse=!1,o.todoAddSubmit=!0,o.toDo={priority:!1},o.isToggledTodo=function(t){return o.toggled[t]},o.toggleTodo=function(t){o.toggled[t]=!o.toggled[t]},o.sortBy=function(t){o.sortField===t?o.reverse=!o.reverse:(o.sortField=t,o.reverse=!1)},o.doneFilter=function(o){return 1===o.done},o.dater=function(){return"d-MM-yyyy"},o.checkboxed=function(){o.toDo.priority=!o.toDo.priority},o.resetForm=function(){o.toDo={priority:!1},o.formTodo.$setPristine()},o.go=function(o){t.path(o)},n.query().then(function(t){o.todos=t.data}),o.changeTodo=function(){console.log("test"),t.path(e.getUrl("lang")+"/"+e.getUrl("menu.options.url")+"/"+e.getUrl("todo.form.url"))},o.addTodo=function(o){console.log(o),n.post(o).then(function(o){console.log(o),t.path(e.getUrl("lang")+"/"+e.getUrl("menu.options.url")+"/"+e.getUrl("options.todo.url"))})},o.todoOnOff=function(t,e){n.setId(t.id),"removed"===e?n.put({action:"removed"}).then(function(){o.todos.splice(o.todos.indexOf(t),1)}):"priority"===e?n.put({action:"priority"}).then(function(n){o.todos[o.todos.indexOf(t)].priority=n.data.priority}):"done"===e&&n.put({action:"done"}).then(function(n){o.todos[o.todos.indexOf(t)].done=n.data.done})},o.canSave=function(){return o.formTodo.$valid}}]);